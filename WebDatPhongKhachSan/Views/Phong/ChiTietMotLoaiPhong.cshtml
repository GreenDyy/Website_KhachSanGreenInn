
@{
    ViewBag.Title = Model.loaiPhong.ten_loai;
    Layout = "~/Views/Shared/_LayoutChiTietLoaiPhong.cshtml";
}

@model WebDatPhongKhachSan.ViewModels.ChiTietListLoaiPhongVaListLoaiPhongKhacDataView
<!--View này lấy hình bằng viewbag-->

@if (ViewBag.ThongBaoGoiYPhong != null)
{
    <p class="text-danger">@ViewBag.ThongBaoGoiYPhong]</p>
}

<div class="">
    <img class="w-100" style="height: 10%;" src="~/Images/Wallpaper/bgmin.jpg" />
</div>
<div class="container mb-5">
    <div class="text-center mt-5">
        <h1 class="mt-3">@Model.loaiPhong.ten_loai</h1>
        <p>@Model.loaiPhong.mota</p>
    </div>

    <div class="row mt-5">
        @{
            foreach (var item in ViewBag.ListImage)
            {
                <div class="col-lg-6 col-md-6 col-sm-6">
                    <img class="w-100 h-100 rounded-3" src="~/Images/Hotels/@item.id_hinh" />
                </div>

                break;
            }
        }

        <div class="col-lg-6 col-md-6 col-sm-6">
            <div class="card bg-light p-3 m-5" style="border: groove green; margin-bottom: 70px; margin-top: 70px">
                <h2 class="text-center fw-bold">THÔNG TIN PHÒNG</h2>

                <div class="d-flex p-2">
                    <p class="me-4"><i class="fas fa-home"></i>&ensp; 28m2</p>
                    @{
                        if (Model.loaiPhong.so_luong_nguoi == 1)
                        {
                            <p class="me-4"><i class="fas fa-bed"></i>&ensp;Giường đơn</p>
                        }
                        else
                        {
                            <p class="me-4"><i class="fas fa-bed"></i>&ensp;Giường đôi</p>
                        }

                    }

                    <p class="me-4"><i class="fas fa-male"></i>&ensp;@Model.loaiPhong.so_luong_nguoi khách</p>
                </div>

                <hr />
                <div class="row">
                    <h5 class="fw-bold">Các tiện nghi:</h5>
                    <div class="col-6">
                        <ul>
                            <li>Wifi miễn phí</li>
                            <li>LED TV</li>
                            <li>Dịch vụ chăm sóc khách hàng 24/24</li>
                            <li>Nhận phòng sớm hoặc trả phòng trễ (tùy vào tình trạng phòng)</li>
                            <li>View thành phố</li>
                            <li>Dịch vụ chăm sóc khách hàng 24/24</li>
                        </ul>
                    </div>

                    <div class="col-6 ">
                        <ul>
                            <li>Phòng tắm, vòi sen</li>
                            <li>Quầy mini bar, trà, cà phê</li>
                            <li>Két sắt</li>
                            <li>Dịch vụ dọn phòng</li>
                            <li>Dịch vụ giặt ủi (phụ thu)</li>
                            <li>Hồ bơi vô cực</li>
                        </ul>
                    </div>
                </div>
                <a class="btn btn-success rounded-5 mt-4" id="datNgayBtn" href="/Phong/ListPhong?id_loaiphong=">ĐẶT NGAY</a>

                <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
                <script>
                    $(document).ready(function () {
                        // Lấy giá trị 'id_loaiphong' từ URL
                        var urlParams = new URLSearchParams(window.location.search);
                        var id_loaiphong = urlParams.get("id_loaiphong");

                        if (id_loaiphong) {
                            // Lấy href hiện tại của nút "ĐẶT NGAY"
                            var currentHref = $("#datNgayBtn").attr("href");

                            // Tạo URL mới với giá trị 'id_loaiphong' và cập nhật href của nút "ĐẶT NGAY"
                            var newHref = currentHref + id_loaiphong;
                            $("#datNgayBtn").attr("href", newHref);
                        }
                    });
                </script>

            </div>

        </div>
    </div>

    <!--Gallary-->
    <!-- Carousel -->
    <div class="my-5">
        @*<h3 class="text-center mb-3 mt-5">Thư viện</h3>*@
        <div id="demo" class="carousel slide" data-bs-ride="carousel">

            <!-- Indicators/dots -->
            <div class="carousel-indicators">
                <!--Đếm số hình trong loại phòng-->
                @{ int count = 0;}
                @foreach (var img in ViewBag.ListImage)
                {
                    count++;
                }

                @for (int i = 0; i < count; i++)
                {
                    if (i == 0)
                    {
                        <button type="button" data-bs-target="#demo" data-bs-slide-to="0" class="active"></button>
                    }
                    else
                    {
                        <button type="button" data-bs-target="#demo" data-bs-slide-to="@i"></button>
                    }

                }

            </div>

            <!-- The slideshow/carousel -->

            <div class="carousel-inner">
                @{
                    bool checkFistImage = true;
                    int demanh = 1;
                }
                @foreach (var img in ViewBag.ListImage)
                {
                    if (checkFistImage)
                    {
                        <div class="carousel-item active">
                            <img src="~/Images/Hotels/@img.id_hinh" alt="Gnar" class="d-block w-100 rounded-4" style="height: 600px">
                            <div class="carousel-caption d-none d-md-block">
                                <h5>@Model.loaiPhong.ten_loai</h5>
                                <p>Hình @demanh</p>
                            </div>
                        </div>
                        checkFistImage = false;
                    }
                    else
                    {
                        <div class="carousel-item">
                            <img src="~/Images/Hotels/@img.id_hinh" alt="Gnar" class="d-block w-100 rounded-4" style="height: 600px">
                            <div class="carousel-caption d-none d-md-block">
                                <h5>@Model.loaiPhong.ten_loai</h5>
                                <p>Hình @demanh</p>
                            </div>
                        </div>
                    }

                    demanh++;
                }


            </div>

            <!-- Left and right controls/icons -->
            <button class="carousel-control-prev" type="button" data-bs-target="#demo" data-bs-slide="prev">
                <span class="carousel-control-prev-icon"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#demo" data-bs-slide="next">
                <span class="carousel-control-next-icon"></span>
            </button>
        </div>
    </div>

    <hr />

    <h2 class="fw-bold text-center">CÁC PHÒNG KHÁC</h2>
    <div class="row">
        @foreach (var item in Model.loaiPhongs)
        {
            {
                <div class="col-lg-4 col-md-4 col-sm-12 p-4">
                    <div class="card">
                        <img class="w-100 h-auto rounded-3 " src="~/Images/Hotels/@item.imgphongs.FirstOrDefault().id_hinh">
                        <div class="p-3">
                            <h3 class="fw-bold">@item.ten_loai</h3>
                            <p class="my-3">
                                @item.mota
                            </p>
                            <p>@item.so_luong_nguoi khách</p>
                            <p>
                                <i class="fas fa-bed"></i>&ensp;
                                <i class="fas fa-bathtub"></i> &ensp;
                                <i class="fas fa-coffee"></i>&ensp;
                                <i class="fas fa-cutlery"></i>&ensp;
                                <i class="fas fa-wifi"></i>&ensp;
                                <i class="fas fa-tv"></i>&ensp;
                            </p>
                            <a class="text-success fst-italic" href="/Phong/ChiTietMotLoaiPhong?id_loaiphong=@item.id_loaiphong">Xem thêm</a>
                        </div>
                    </div>

                </div>
            }
        }
    </div>

</div>



